<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Implementing Overrides for Common Processing</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="schema.DC" href="http://purl.org/dc/terms/"><meta name="DC.Type" content="concept"><meta name="DC.Title" content="Implementing Overrides for Common Processing"><meta name="abstract" content="You can use the same args.xsl parameter as for the XHTML transform to specify a custom top-level transform that includes overrides to the base processing."><meta name="description" content="You can use the same args.xsl parameter as for the XHTML transform to specify a custom top-level transform that includes overrides to the base processing."><meta name="DC.subject" content="overriding base processing"><meta name="keywords" content="overriding base processing"><meta name="DC.Relation" scheme="URI" content="../../../user_docs/d4p-users-guide/introduction-chapter.html"><meta name="DC.Relation" scheme="URI" content="../../../user_docs/d4p-users-guide/tasks/plugin-installation.html"><meta name="DC.Relation" scheme="URI" content="generating-epubs.html"><meta name="DC.Relation" scheme="URI" content="generating-epubs.html"><meta name="DC.Relation" scheme="URI" content="creating-opf-metadata.html"><meta name="DC.Relation" scheme="URI" content="epub-transtype-parameters-ref.html"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="conceptId"><script type="text/javascript">var d4p = {"relativePath":"..\/..\/..\/","dev":false,"debug":false,"draft":false,"nextTopicHref":"repo\/org.dita4publishers.epub\/epub-plugin\/epub-transtype-parameters-ref.html","previousTopicHref":"repo\/org.dita4publishers.epub\/epub-plugin\/creating-opf-metadata.html","root":false,"topic":{"chunked":""},"map":{"title":"  DITA For Publishers User Guide  ","chunked":false},"search":{"minlength":2},"l":{"searchPageHeading":"Search Results","close":"Close"}}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="../../../themes/dita-d4p-classic/css/style.css"><link rel="stylesheet" type="text/css" media="screen, projection, print" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,
          
          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,
          
          // Optional callback... myCallback(i, width)
          callback: doc_resize,
          
          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  = mobile.css',
             // medium (size-1, size-2)
            '760px  to 980px  = 720.css',
            '980px  to 1270px = 960.css',
             // large (size-3, size-5)
            '1270px to 1600px = 1200.css',
            '1600px to 1940px = 1560.css',
             // extra large (size-6)
            '1940px to 2540px = 1920.css',
            '2540px           = 2520.css'
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="../../../themes/dita-d4p-classic/js/script.js"></script></head><body class="en-us dita-d4p-classic centered navigation-default"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer">Skip to footer</a></li></ul><header role="banner" aria-labelledby="publication-title" class="hide-for-small"><div class="grid_8"><h1 id="publication-title">  DITA For Publishers User Guide  </h1></div><section class="grid_4 search-box"><form id="search" role="search"><div class="form-group"><input id="search-text" type="text" autocomplete="off" class="form-control" placeholder="Search"></div></form></section><secion class="clearfix"></secion></header><div id="d4h5-section-container" class="grid_12"><nav id="local-navigation" class="grid_4 alpha omega" role="navigation" aria-label="Main navigation"><div id="nav-content"><ul><li><a href="../../../index.html">Table of Contents</a></li><li><a href="../../../user_docs/d4p-users-guide/frontmatter/coverpage.html">DITA For Publishers User Guide</a></li><li><a href="../../../user_docs/d4p-users-guide/topics/about-this-book.html">About This Book</a></li><li class="collapsible collapsed"><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes.html">Release Notes</a><ul><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-1.0.0.html">Release Notes: Version 1.0.0RC00 (github version)</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.19.html">Release Notes: Version 0.9.19RC12</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.18.html">Release Notes: Version 0.9.18</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.16.html">Release Notes: Version 0.9.16</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.15.html">Release Notes: Version 0.9.15</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.14.html">Release Notes: Version 0.9.14</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.13.html">Release Notes: Version 0.9.13</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.12.html">Release Notes: Version 0.9.12</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.11.html">Release Notes: Version 0.9.11</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.10.html">Release Notes: Version 0.9.10</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.9.html">Release Notes: Version 0.9.9</a></li></ul></li><li><a href="../../../user_docs/d4p-users-guide/topics/intro-to-d4p.html"><span class="enumeration enumeration0">Chapter&nbsp;1. </span>Introduction to DITA For Publishers</a></li><li class="collapsible active"><a href="../../../user_docs/d4p-users-guide/introduction-chapter.html"><span class="enumeration enumeration0">Part&nbsp;I. </span>The DITA For Publishers Open Toolkit Plugins</a><ul><li><a href="../../../user_docs/d4p-users-guide/tasks/plugin-installation.html"><span class="enumeration enumeration1">Chapter&nbsp;2. </span>Installing the Toolkit Plugins</a></li><li class="collapsible active"><a href="generating-epubs.html"><span class="enumeration enumeration1">Chapter&nbsp;3. </span>Generating EPUBs and Kindle Books from DITA Content</a><ul><li><a href="generating-epubs-from-oxygen.html">Generating EPUBs From OxygenXML</a></li><li><a href="generating-kindle-books-from-oxygen.html">Generating Kindle Books From OxygenXML</a></li><li><a href="using-custom-css.html">Using Custom CSS Style Sheets</a></li><li><a href="creating-cover-graphics.html">Creating Cover Graphics and Covers</a></li><li><a href="creating-opf-metadata.html">Creating Arbitrary EPUB OPF Metadata</a></li><li class=" active"><a href="overriding-base-processing.html" class=" selected">Implementing Overrides for Common Processing</a></li><li class="collapsible collapsed"><a href="epub-transtype-parameters-ref.html">EPUB and Kindle Transformation Parameters</a><ul><li><a href="reference/ant-parm-argsCssOutputDir.html">args.css.output.dir Ant parameter</a></li><li><a href="reference/ant-parm-coverGraphicFile.html">cover.graphic.file Ant parameter</a></li><li><a href="reference/ant-parm-d4pMaxNavDepth.html">d4p.max.nav.depth Ant parameter</a></li><li><a href="reference/ant-parm-d4pMaxTocDepth.html">d4p.max.toc.depth Ant parameter</a></li><li><a href="reference/ant-parm-epubIncludeAutoRellinks.html">epub.exclude.auto.rellinks Ant parameter</a></li><li><a href="reference/ant-parm-epubPubidUriStub.html">epub.pubid.uri.stub Ant parameter</a></li><li><a href="reference/ant-parm-epubTempDir.html">epub.temp.dir Ant parameter</a></li><li><a href="reference/ant-parm-imagesOutputDir.html">images.output.dir Ant parameter</a></li><li><a href="reference/ant-parm-kindleGenExecutable.html">kindlegen.executable Ant parameter</a></li><li><a href="reference/ant-parm-titleOnlyTopicClassSpec.html">title.only.topic.class.spec Ant parameter</a></li><li><a href="reference/ant-parm-titleOnlyTopicTitleClassSpec.html">title.only.topic.title.class.spec Ant parameter</a></li><li><a href="reference/ant-parm-topicsOutputDir.html">topics.output.dir Ant parameter</a></li></ul></li></ul></li><li class="collapsible collapsed"><a href="../../org.dita4publishers.common.mapdriven/map-driven-processing/map-driven-processing.html"><span class="enumeration enumeration1">Chapter&nbsp;4. </span>Map-Driven Processing</a><ul><li><a href="../../org.dita4publishers.common.mapdriven/map-driven-processing/map-driven-processing.html">Map-Driven Processing</a></li><li><a href="../../org.dita4publishers.common.mapdriven/map-driven-processing/enumeration.html">Numbering Things: Collected Data and Enumeration</a></li><li><a href="../../org.dita4publishers.common.mapdriven/map-driven-processing/index-generation.html">Index Generation</a></li><li><a href="../../org.dita4publishers.common.mapdriven/map-driven-processing/graphic-map-generation.html">Graphic Map Generation</a></li></ul></li></ul></li><li><a href="../../../user_docs/d4p-users-guide/backmatter/colophon.html">Colophon</a></li><li><a href="../../../generated-index.html">Index</a></li></ul></div></nav><div id="d4h5-main-content" class="grid_8 alpha omega"><article><nav id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="parentlink"><a href="../../../user_docs/d4p-users-guide/introduction-chapter.html" title="The DITA For Publishers Open Toolkit Plugins"><span class="fi fi-arrow-up"></span><span class="screen-reader">The DITA For Publishers Open Toolkit Plugins</span></a></div><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="previouslink"><a href="../../../user_docs/d4p-users-guide/tasks/plugin-installation.html" title="Installing the Toolkit Plugins"><span class="fi fi-arrow-left"></span><span class="screen-reader">Installing the Toolkit Plugins</span></a></div><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="nextlink"><a href="generating-epubs.html" title="Generating EPUBs and Kindle Books from DITA Content"><span class="fi fi-arrow-right"></span><span class="screen-reader">Generating EPUBs and Kindle Books from DITA Content</span></a></div></div><div class="familylinks"><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="parentlink"><a href="generating-epubs.html" title="Generating EPUBs and Kindle Books from DITA Content"><span class="fi fi-arrow-up"></span><span class="screen-reader">Generating EPUBs and Kindle Books from DITA Content</span></a></div><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="previouslink"><a href="creating-opf-metadata.html" title="Creating Arbitrary EPUB OPF Metadata"><span class="fi fi-arrow-left"></span><span class="screen-reader">Creating Arbitrary EPUB OPF Metadata</span></a></div><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="nextlink"><a href="epub-transtype-parameters-ref.html" title="EPUB and Kindle Transformation Parameters"><span class="fi fi-arrow-right"></span><span class="screen-reader">EPUB and Kindle Transformation Parameters</span></a></div></div></nav><section id="page"><div class="page concept    topic topic concept concept "><a name="conceptId" id="conceptId" class="anchor"></a>
 <h1 class="title topictitle1">Implementing Overrides for Common Processing</h1>
 
  
 <div class="body conbody"><p class="shortdesc">You can use the same <span class="keyword parmname">args.xsl</span> parameter as for the XHTML transform to specify a custom top-level transform that includes overrides to the base processing.</p>
   <p class="p">The Toolkit's XHTML transform provides a parameter, <span class="keyword parmname">args.xml</span>, by which you can specify the top-level XSLT transform to be used by the transformation type. You normally use this facility to apply overrides to the base processing provided by the transformation type.</p>
    <p class="p">Note that there is an important distinction between <em class="ph i">extending</em> a transformation type and <em class="ph i">overriding</em> a transformation type. Extensions are provided through Toolkit plugins that are integrated with the base transformation type and apply to all uses of that transformation type. For example, the DITA for Publishers formatting-d.html and formatting-d.fo Toolkit plugins extend the base XHTML and PDF transforms with support for the DITA for Publishers formatting domain elements. These extensions are used unconditionally by all invocations of the XHTML and PDF transformation types.</p>
    <p class="p">When you <em class="ph i">override</em> a transformation type you are changing the base processing for a specific invocation of the transformation type. Overrides are not integrated with the base transformation type. Rather, they are implemented as new top-level XSLT transforms that import the base transformation (e.g., dita2xhtml.xsl) and include or import custom XSLT code that extends or overrides the base processing.</p>
    <p class="p">You normally use overrides to achieve output results that are specific to a particular document, document type, or delivery target. For example, you might want to output specific topic-level metadata for a specific kind of publication or even for a specific single publication. When dealing with Publishing use cases, where every publication might have different requirements it is likely that you may need to implement publication-specific overrides to achieve some specific effect.</p>
    <p class="p">Note also that the general override strategy for HTML-based outputs like EPUB and Kindle is different from the override strategy for PDF output using the Toolkit's built-in PDF transformation type. The PDF transformation type has its own customization framework that provides a different way to apply overrides to the transformation (it also allows extension using integrated plugins).</p>
    <p class="p">You can override the EPUB and Kindle processing by creating a new top-level XSLT transformation that includes the base map2epub.xsl or map2kindle.xsl transforms provided by the respective Toolkit plugins and that also includes your custom XSLT transform that does whatever you need. Because the EPUB and Kindle transforms are both based on the XHTML transform you can normally use a single override file with the XHTML, EPUB, and Kindle transformation types.</p>
    <p class="p">The top-level transformation can be packaged as a separate Open Toolkit plugin that depends on, but does not integrate into, the base transformation type it extends. This is the best thing to do if you must distribute the extension to different systems. If the override will only be used on a single machine you can put the top-level transformation anywhere. However, in this case the top-level transformation will necessarily have system-specific URIs for the Toolkit-provided base transformations, which means it is not portable.</p>
    <div class="p">A typical "local" top-level transformation file looks like this:<pre class="pre codeblock">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  version="2.0"&gt;
  
  &lt;xsl:import href="/Applications/oxygen/frameworks/dita//DITA-OT/plugins/org.dita4publishers.epub/xsl/map2epub.xsl"/&gt;
  &lt;xsl:include href="my-html-overrides.xsl"/&gt;
  
&lt;/xsl:stylesheet&gt;</pre></div>
    <p class="p">This example is a "local" override that uses an absolute URI to import the base transformation, in this case the EPUB <span class="ph filepath">map2epub.xsl</span> transform. It also includes the local overrides, here in the file <span class="ph filepath">my-html-overrides.xsl</span>. The corresponding transformation for the Kindle transformation type would include the Kindle-specific top-level transform and the same overrides (assuming that you want the EPUB and Kindle outputs to reflect the same overrides, which would normally be the case).</p>
    <p class="p">The overrides themselves can be anything you need and can override either the base XHTML processing from the dita2xhtml transformation type or can override the EPUB- and Kindle-specific processing from the EPUB or Kindle plugins. For most overrides you would be overriding the base XHTML processing.</p>
    <p class="p">To use the override transformation you simply specify the path and filename of the transformation as the value of the <span class="keyword parmname">args.xml</span> Ant parameter for the XHTML, EPUB, or Kindle transformation types. </p>
    <p class="p">To package an override as a Toolkit plugin you create a <span class="ph filepath">plugin.xml</span> file that defines the plugin and use a relative URI to include the base transformation type, relative to the plugin's location as deployed in a Toolkit. You put the <span class="ph filepath">plugin.xml</span> and override transform into their own uniquely-named directory within the Toolkit's <span class="ph filepath">plugins/</span> directory.</p>
    <div class="p">The <span class="ph filepath">plugin.xml</span> file should look like this:<pre class="pre codeblock">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;plugin id="<strong class="ph b">my.unique.plugin.name</strong>"&gt;
  
  &lt;require plugin="org.dita4publishers.epub"/&gt; 
  
&lt;/plugin&gt;</pre></div>
    <p class="p">Where the bold text should reflect a unique name for this particular plugin.</p>
    <p class="p">This plugin descriptor simply establishes a dependency on the Toolkit transformation type it overrides, e.g., the EPUB plugin. </p>
    <div class="p">Assuming that you are deploying the plugin to the <span class="ph filepath">plugins/</span> directory and that your override template is at the root of its own plugin's directory, then the top-level transform should look like this:<pre class="pre codeblock">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  version="2.0"&gt;
  
  &lt;xsl:import href="../org.dita4publishers.epub/xsl/map2epub.xsl"/&gt;
  &lt;xsl:include href="my-html-overrides.xsl"/&gt;
  
&lt;/xsl:stylesheet&gt;</pre></div>
    <p class="p">With this plugin you can then specify the transformation within your plugin as the value of the <span class="keyword parmname">args.xml</span> Ant parameter.</p>
 </div>
<div class="related-links"></div>
<footer id="topicsNPLinks"><div id="footer_previous"><a xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" href="../../../repo/org.dita4publishers.epub/epub-plugin/creating-opf-metadata.html" class="previous" rel="internal">Creating Arbitrary EPUB OPF Metadata</a></div><div id="footer_next"><a xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" href="../../../repo/org.dita4publishers.epub/epub-plugin/epub-transtype-parameters-ref.html" class="next" rel="internal">EPUB and Kindle Transformation Parameters</a></div></footer></div></section></article><div class="clear"></div></div><div class="clearfix"></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"></div></div></body></html>