<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Map-Driven Processing</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="schema.DC" href="http://purl.org/dc/terms/"><meta name="DC.Type" content="concept"><meta name="DC.Title" content="Map-Driven Processing"><meta name="abstract" content="Using and extending the DITA for Publishers map-driven processing framework"><meta name="description" content="Using and extending the DITA for Publishers map-driven processing framework"><meta name="DC.subject" content="HTML, generating, map-driven processing, using, maps, processing topics in terms of, topics, processing in map context"><meta name="keywords" content="HTML, generating, map-driven processing, using, maps, processing topics in terms of, topics, processing in map context"><meta name="DC.Relation" scheme="URI" content="../../../user_docs/d4p-users-guide/introduction-chapter.html"><meta name="DC.Relation" scheme="URI" content="../../org.dita4publishers.epub/epub-plugin/generating-epubs.html"><meta name="DC.Relation" scheme="URI" content="map-driven-processing.html"><meta name="DC.Relation" scheme="URI" content="../../../user_docs/d4p-users-guide/introduction-chapter.html"><meta name="DC.Relation" scheme="URI" content="../../org.dita4publishers.epub/epub-plugin/generating-epubs.html"><meta name="DC.Relation" scheme="URI" content="map-driven-processing.html"><meta name="DC.Relation" scheme="URI" content="../../../user_docs/d4p-users-guide/introduction-chapter.html"><meta name="DC.Relation" scheme="URI" content="../../org.dita4publishers.epub/epub-plugin/generating-epubs.html"><meta name="DC.Relation" scheme="URI" content="../../org.dita4publishers.html2/html2-plugin/html2-toolkit-plugin.html"><meta name="DC.Relation" scheme="URI" content="map-driven-processing.html"><meta name="DC.Relation" scheme="URI" content="enumeration.html"><meta name="DC.Relation" scheme="URI" content="index-generation.html"><meta name="DC.Relation" scheme="URI" content="graphic-map-generation.html"><meta name="DC.Relation" scheme="URI" content="map-driven-processing.html"><meta name="DC.Relation" scheme="URI" content="enumeration.html"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="conceptId"><script type="text/javascript">var d4p = {"relativePath":"..\/..\/..\/","dev":false,"debug":false,"draft":false,"nextTopicHref":"repo\/org.dita4publishers.common.mapdriven\/map-driven-processing\/map-driven-processing.html","previousTopicHref":"repo\/org.dita4publishers.epub\/epub-plugin\/reference\/ant-parm-topicsOutputDir.html","root":false,"topic":{"chunked":""},"map":{"title":"  DITA For Publishers User Guide  ","chunked":false},"search":{"minlength":2},"l":{"searchPageHeading":"Search Results","close":"Close"}}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="../../../themes/dita-d4p-classic/css/style.css"><link rel="stylesheet" type="text/css" media="screen, projection, print" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,
          
          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,
          
          // Optional callback... myCallback(i, width)
          callback: doc_resize,
          
          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  = mobile.css',
             // medium (size-1, size-2)
            '760px  to 980px  = 720.css',
            '980px  to 1270px = 960.css',
             // large (size-3, size-5)
            '1270px to 1600px = 1200.css',
            '1600px to 1940px = 1560.css',
             // extra large (size-6)
            '1940px to 2540px = 1920.css',
            '2540px           = 2520.css'
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="../../../themes/dita-d4p-classic/js/script.js"></script></head><body class="en-us dita-d4p-classic centered navigation-default"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer">Skip to footer</a></li></ul><header role="banner" aria-labelledby="publication-title" class="hide-for-small"><div class="grid_8"><h1 id="publication-title">  DITA For Publishers User Guide  </h1></div><section class="grid_4 search-box"><form id="search" role="search"><div class="form-group"><input id="search-text" type="text" autocomplete="off" class="form-control" placeholder="Search"></div></form></section><secion class="clearfix"></secion></header><div id="d4h5-section-container" class="grid_12"><nav id="local-navigation" class="grid_4 alpha omega" role="navigation" aria-label="Main navigation"><div id="nav-content"><ul><li><a href="../../../index.html">Table of Contents</a></li><li><a href="../../../user_docs/d4p-users-guide/frontmatter/coverpage.html">DITA For Publishers User Guide</a></li><li><a href="../../../user_docs/d4p-users-guide/topics/about-this-book.html">About This Book</a></li><li class="collapsible collapsed"><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes.html">Release Notes</a><ul><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-1.0.0.html">Release Notes: Version 1.0.0RC00 (github version)</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.19.html">Release Notes: Version 0.9.19RC12</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.18.html">Release Notes: Version 0.9.18</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.16.html">Release Notes: Version 0.9.16</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.15.html">Release Notes: Version 0.9.15</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.14.html">Release Notes: Version 0.9.14</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.13.html">Release Notes: Version 0.9.13</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.12.html">Release Notes: Version 0.9.12</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.11.html">Release Notes: Version 0.9.11</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.10.html">Release Notes: Version 0.9.10</a></li><li><a href="../../../user_docs/d4p-users-guide/release-notes/release-notes-0.9.9.html">Release Notes: Version 0.9.9</a></li></ul></li><li><a href="../../../user_docs/d4p-users-guide/topics/intro-to-d4p.html"><span class="enumeration enumeration0">Chapter&nbsp;1. </span>Introduction to DITA For Publishers</a></li><li class="collapsible active"><a href="../../../user_docs/d4p-users-guide/introduction-chapter.html"><span class="enumeration enumeration0">Part&nbsp;I. </span>The DITA For Publishers Open Toolkit Plugins</a><ul><li><a href="../../../user_docs/d4p-users-guide/tasks/plugin-installation.html"><span class="enumeration enumeration1">Chapter&nbsp;2. </span>Installing the Toolkit Plugins</a></li><li class="collapsible collapsed"><a href="../../org.dita4publishers.epub/epub-plugin/generating-epubs.html"><span class="enumeration enumeration1">Chapter&nbsp;3. </span>Generating EPUBs and Kindle Books from DITA Content</a><ul><li><a href="../../org.dita4publishers.epub/epub-plugin/generating-epubs-from-oxygen.html">Generating EPUBs From OxygenXML</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/generating-kindle-books-from-oxygen.html">Generating Kindle Books From OxygenXML</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/using-custom-css.html">Using Custom CSS Style Sheets</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/creating-cover-graphics.html">Creating Cover Graphics and Covers</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/creating-opf-metadata.html">Creating Arbitrary EPUB OPF Metadata</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/overriding-base-processing.html">Implementing Overrides for Common Processing</a></li><li class="collapsible collapsed"><a href="../../org.dita4publishers.epub/epub-plugin/epub-transtype-parameters-ref.html">EPUB and Kindle Transformation Parameters</a><ul><li><a href="../../org.dita4publishers.epub/epub-plugin/reference/ant-parm-argsCssOutputDir.html">args.css.output.dir Ant parameter</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/reference/ant-parm-coverGraphicFile.html">cover.graphic.file Ant parameter</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/reference/ant-parm-d4pMaxNavDepth.html">d4p.max.nav.depth Ant parameter</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/reference/ant-parm-d4pMaxTocDepth.html">d4p.max.toc.depth Ant parameter</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/reference/ant-parm-epubIncludeAutoRellinks.html">epub.exclude.auto.rellinks Ant parameter</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/reference/ant-parm-epubPubidUriStub.html">epub.pubid.uri.stub Ant parameter</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/reference/ant-parm-epubTempDir.html">epub.temp.dir Ant parameter</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/reference/ant-parm-imagesOutputDir.html">images.output.dir Ant parameter</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/reference/ant-parm-kindleGenExecutable.html">kindlegen.executable Ant parameter</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/reference/ant-parm-titleOnlyTopicClassSpec.html">title.only.topic.class.spec Ant parameter</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/reference/ant-parm-titleOnlyTopicTitleClassSpec.html">title.only.topic.title.class.spec Ant parameter</a></li><li><a href="../../org.dita4publishers.epub/epub-plugin/reference/ant-parm-topicsOutputDir.html">topics.output.dir Ant parameter</a></li></ul></li></ul></li><li class="collapsible active"><a href="map-driven-processing.html" class=" selected"><span class="enumeration enumeration1">Chapter&nbsp;4. </span>Map-Driven Processing</a><ul><li class=" active"><a href="map-driven-processing.html" class=" selected">Map-Driven Processing</a></li><li><a href="enumeration.html">Numbering Things: Collected Data and Enumeration</a></li><li><a href="index-generation.html">Index Generation</a></li><li><a href="graphic-map-generation.html">Graphic Map Generation</a></li></ul></li><li class="collapsible collapsed"><a href="../../org.dita4publishers.html2/html2-plugin/html2-toolkit-plugin.html"><span class="enumeration enumeration1">Chapter&nbsp;5. </span>HTML2 Plugin</a><ul><li class="collapsible collapsed"><a href="../../org.dita4publishers.html2/html2-plugin/understanding-html2-transforms.html">Understanding the HTML2 Transformations</a><ul><li><a href="../../org.dita4publishers.html2/html2-plugin/overall-process-flow.html">Overall HTML Generation Process Flow</a></li><li><a href="../../org.dita4publishers.html2/html2-plugin/customizing-enumeration.html">Extending and Customizing Enumeration Processing (Numbering)</a></li></ul></li><li class="collapsible collapsed"><a href="../../org.dita4publishers.html2/html2-plugin/html2-transtype-parameters-ref.html">HTML2 Transformation Parameters</a><ul><li><a href="../../org.dita4publishers.html2/html2-plugin/reference/ant-parm-fileOrganizationStrategy.html">html2.file.organization.strategy Ant parameter</a></li><li><a href="../../org.dita4publishers.html2/html2-plugin/reference/ant-parm-generateDynamicToc.html">html2.generate.dynamic.toc Ant parameter</a></li><li><a href="../../org.dita4publishers.html2/html2-plugin/reference/ant-parm-generateFrameset.html">html2.generate.frameset Ant parameter</a></li><li><a href="../../org.dita4publishers.html2/html2-plugin/reference/ant-parm-generateStaticToc.html">html2.generate.static.toc Ant parameter</a></li></ul></li></ul></li></ul></li><li><a href="../../../user_docs/d4p-users-guide/backmatter/colophon.html">Colophon</a></li><li><a href="../../../generated-index.html">Index</a></li></ul></div></nav><div id="d4h5-main-content" class="grid_8 alpha omega"><article><nav id="content-toolbar" class="toolbar hide-for-small"><div class="familylinks"><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="parentlink"><a href="../../../user_docs/d4p-users-guide/introduction-chapter.html" title="The DITA For Publishers Open Toolkit Plugins"><span class="fi fi-arrow-up"></span><span class="screen-reader">The DITA For Publishers Open Toolkit Plugins</span></a></div><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="previouslink"><a href="../../org.dita4publishers.epub/epub-plugin/generating-epubs.html" title="Generating EPUBs and Kindle Books from DITA Content"><span class="fi fi-arrow-left"></span><span class="screen-reader">Generating EPUBs and Kindle Books from DITA Content</span></a></div><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="nextlink"><a href="map-driven-processing.html" title="Map-Driven Processing"><span class="fi fi-arrow-right"></span><span class="screen-reader">Map-Driven Processing</span></a></div></div><div class="familylinks"><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="parentlink"><a href="../../../user_docs/d4p-users-guide/introduction-chapter.html" title="The DITA For Publishers Open Toolkit Plugins"><span class="fi fi-arrow-up"></span><span class="screen-reader">The DITA For Publishers Open Toolkit Plugins</span></a></div><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="previouslink"><a href="../../org.dita4publishers.epub/epub-plugin/generating-epubs.html" title="Generating EPUBs and Kindle Books from DITA Content"><span class="fi fi-arrow-left"></span><span class="screen-reader">Generating EPUBs and Kindle Books from DITA Content</span></a></div><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="nextlink"><a href="../../org.dita4publishers.html2/html2-plugin/html2-toolkit-plugin.html" title="HTML2 Plugin"><span class="fi fi-arrow-right"></span><span class="screen-reader">HTML2 Plugin</span></a></div></div><div class="familylinks"><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="parentlink"><a href="map-driven-processing.html" title="Map-Driven Processing"><span class="fi fi-arrow-up"></span><span class="screen-reader">Map-Driven Processing</span></a></div><div xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" class="nextlink"><a href="enumeration.html" title="Numbering Things: Collected Data and Enumeration"><span class="fi fi-arrow-right"></span><span class="screen-reader">Numbering Things: Collected Data and Enumeration</span></a></div></div></nav><section id="page"><div class="page concept    topic topic concept concept "><a name="conceptId" id="conceptId" class="anchor"></a>
 <h1 class="title topictitle1"><span xmlns="http://www.w3.org/1999/xhtml" class="enumeration_chapter">Chapter&nbsp;4. </span>Map-Driven Processing</h1>
 
  
 <div class="body conbody"><p class="shortdesc">Using and extending the DITA for Publishers map-driven processing
    framework</p>
   <div class="p">DITA for Publishers provides general map-driven processing whereby the
      output generation for each topic is driven by processing of the root input
      map. This allows each topic to be processed with full knowledge of its use
      context in the map. This in turn enables a number of important functions:<ul class="ul">
      <li class="li">Numbering of topics and within-topic elements in terms of the topicref
        hierarchy in the map ("enumeration").</li>
      <li class="li">Processing of topics in terms of semantics imposed by topicrefs (e.g.,
        processing a generic topic as a "chapter" because it is referenced by a
        <code>&lt;chapter&gt;</code> topicref).</li>
      <li class="li">Distinguishing separate uses of the same topic within a map in order
        to do automatic chunking and link rewriting.</li>
      <li class="li">Generating output files in a structure different from the source file
        organization structure.</li>
      <li class="li">Generation of literal files for topic heads as though the topic heads
        were references to title-only topics.</li>
      <li class="li">Generation of a back-of-the-book indexes, glossaries, and other
        publication-scope lists.</li>
      </ul></div>
    <p class="p">The map-driven processing is used by all the DITA for Publishers
      transformation types, including HTML2, HTML5, EPUB, and Kindle. It is
      intended to be a general facility that can be used with any output
      type.</p>
    <aside class="note note "><span class="title">Note:</span> The map-driven framework could also be used to generate PDF. However,
      the current architecture of the base Toolkit PDF transform does not lend
      itself to easily being reworked to replace its map-merge-based approach
      with a map-driven approach.</aside>
    <div class="p">The general processing model uses two main phases:<ol class="ol" id="conceptId__ol_izv_h2d_rh">
      <li class="li">Data collection</li>
      <li class="li">Output generation</li>
      </ol></div>
    <div class="p">The data collection phase operates on the map and its topics to build up
      a single XML structure that contains the information needed to do the following:<ul class="ul" id="conceptId__ul_zgw_l2d_rh">
      <li class="li">Number things using normal XSLT numbering facilities (e.g.,
        <code>&lt;xsl:number&gt;</code>) (enumeration
        support).<a id="d10194e95" class="indexterm-anchor"></a><a id="d10194e99" class="indexterm-anchor"></a></li>
      <li class="li">Index entries grouped and sorted for use in generating
        back-of-the-book indexes<a id="d10194e106" class="indexterm-anchor"></a></li>
      <li class="li">Glossary entries grouped and sorted for use in generating glossary
        lists<a id="d10194e111" class="indexterm-anchor"></a></li>
      </ul></div>
    <div class="p">The output generation phase produces whatever the final result is, e.g.,
      HTML. All output generation phase processing is provided the collected
      data as a tunnel parameter named "collected-data". You can access this
      variable by adding the following <code>&lt;xsl:param&gt;</code> to any
      template:<pre class="pre codeblock">&lt;xsl:template ...&gt;
  <strong class="ph b">&lt;xsl:param name="collected-data" as="element()" tunnel="yes"/&gt;</strong>
  ...
&lt;/xsl:&gt;</pre></div>
    <p class="p">You can extend the data collection processing using any of several
      defined extension points.</p>
 </div>
<div class="related-links"><ol class="olchildlinks"><li class="link olchildlink"><a href="map-driven-processing.html">Map-Driven Processing</a><br>Using and extending the DITA for Publishers map-driven processing     framework</li><li class="link olchildlink"><a href="enumeration.html">Numbering Things: Collected Data and Enumeration</a><br>How to use the collected enumeration data to number things in     output.</li><li class="link olchildlink"><a href="index-generation.html">Index Generation</a><br>Overview of using the grouped and sorted index entries in the     collected data to do index generation.</li><li class="link olchildlink"><a href="graphic-map-generation.html">Graphic Map Generation</a><br>The map-driven processing generates an Ant script that copies     graphics from their source locations to the output location.</li></ol></div>
<footer id="topicsNPLinks"><div id="footer_previous"><a xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" href="../../../repo/org.dita4publishers.epub/epub-plugin/reference/ant-parm-topicsOutputDir.html" class="previous" rel="internal">topics.output.dir Ant parameter</a></div><div id="footer_next"><a xmlns:htmlutil="http://dita4publishers.org/functions/htmlutil" href="../../../repo/org.dita4publishers.common.mapdriven/map-driven-processing/map-driven-processing.html" class="next" rel="internal">Map-Driven Processing</a></div></footer></div></section></article><div class="clear"></div></div><div class="clearfix"></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"></div></div></body></html>